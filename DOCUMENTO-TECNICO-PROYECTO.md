# ğŸ“‹ Documento TÃ©cnico del Proyecto - IPS Virtual

## ğŸ¯ 1. PropÃ³sito del Sistema

### ğŸ”´ Problema Identificado

En Colombia y LatinoamÃ©rica, el sector salud enfrenta mÃºltiples desafÃ­os que afectan la calidad y accesibilidad de los servicios mÃ©dicos:

- **CongestiÃ³n en centros mÃ©dicos**: Largas filas y tiempos de espera que pueden superar las 3 horas para una consulta general
- **Dificultad en el agendamiento**: Procesos manuales o telefÃ³nicos que generan confusiÃ³n y citas duplicadas
- **PÃ©rdida de historial mÃ©dico**: Documentos fÃ­sicos extraviados, ilegibles o inaccesibles para el paciente
- **Limitaciones geogrÃ¡ficas**: Pacientes en zonas rurales o alejadas sin acceso fÃ¡cil a especialistas
- **Falta de seguimiento**: Ausencia de trazabilidad en tratamientos y evoluciÃ³n del paciente
- **GestiÃ³n administrativa ineficiente**: Procesos manuales propensos a errores en el manejo de citas, turnos y prescripciones mÃ©dicas
- **Barreras de comunicaciÃ³n**: Dificultad para contactar al mÃ©dico despuÃ©s de la consulta o para aclarar dudas sobre tratamientos

Estos problemas generan:
- âœ–ï¸ Sobrecarga del sistema de salud
- âœ–ï¸ InsatisfacciÃ³n de pacientes y personal mÃ©dico
- âœ–ï¸ Costos operativos elevados
- âœ–ï¸ Riesgos mÃ©dicos por falta de informaciÃ³n histÃ³rica
- âœ–ï¸ Baja adherencia a tratamientos por seguimiento deficiente

### âœ… SoluciÃ³n Propuesta

**IPS Virtual** es una plataforma integral de gestiÃ³n mÃ©dica que digitaliza y centraliza todos los procesos de atenciÃ³n en salud, proporcionando:

**Para Pacientes:**
- ğŸ“± Agendamiento de citas 24/7 desde cualquier dispositivo
- ğŸ¥ Consultas virtuales que eliminan barreras geogrÃ¡ficas
- ğŸ“Š Acceso permanente a su historial clÃ­nico digital
- ğŸ’Š GestiÃ³n de fÃ³rmulas mÃ©dicas con alertas de vencimiento
- ğŸ”” Notificaciones automÃ¡ticas de citas y tratamientos
- ğŸ“„ Descarga de documentos mÃ©dicos en PDF

**Para MÃ©dicos:**
- ğŸ–¥ï¸ Panel de control centralizado de todas sus consultas
- ğŸ“ Registro estructurado de diagnÃ³sticos con cÃ³digo CIE-10
- ğŸ¥ Herramientas para telemedicina con enlaces de videollamada
- ğŸ‘¥ Acceso completo al historial de sus pacientes
- â° GestiÃ³n eficiente de turnos y disponibilidad
- ğŸ“ˆ MÃ©tricas de desempeÃ±o y estadÃ­sticas

**Para Administradores:**
- ğŸ‘¨â€ğŸ’¼ GestiÃ³n completa de personal mÃ©dico y especialidades
- ğŸ“Š Reportes y estadÃ­sticas en tiempo real
- ğŸ¯ OptimizaciÃ³n de recursos y turnos mÃ©dicos
- ğŸ’° Control de servicios y tarifas
- ğŸ“‰ AnÃ¡lisis de ocupaciÃ³n y tiempos de atenciÃ³n

**Beneficios Clave:**
- âœ… ReducciÃ³n de tiempos de espera hasta un 70%
- âœ… EliminaciÃ³n de errores de agendamiento manual
- âœ… Trazabilidad completa del historial mÃ©dico
- âœ… Acceso a salud desde cualquier ubicaciÃ³n
- âœ… ReducciÃ³n de costos operativos
- âœ… Mejora en la adherencia a tratamientos
- âœ… SatisfacciÃ³n aumentada de pacientes y mÃ©dicos

---

## ğŸ¥ 2. Nombre del Sistema

**IPS Virtual - Sistema Integral de GestiÃ³n MÃ©dica**

**Significado:**
- **IPS**: InstituciÃ³n Prestadora de Servicios de Salud
- **Virtual**: Plataforma digital accesible desde cualquier lugar
- **Sistema Integral**: SoluciÃ³n completa que abarca todos los procesos mÃ©dicos y administrativos

**DescripciÃ³n:** Plataforma web para la gestiÃ³n completa de servicios mÃ©dicos virtuales y presenciales, que conecta pacientes, mÃ©dicos y administradores en un ecosistema digital unificado.

---

## ğŸ‘¥ 3. AsignaciÃ³n de Roles del Equipo

### Equipo de Desarrollo

| Nombre | Rol | Funciones y Responsabilidades |
|--------|-----|-------------------------------|
| **Desarrollador 1** | **Full Stack Developer & Arquitecto de Software** | â€¢ DiseÃ±o de arquitectura del sistema<br>â€¢ Desarrollo frontend con Next.js y React<br>â€¢ ImplementaciÃ³n de componentes UI con Tailwind CSS<br>â€¢ IntegraciÃ³n de APIs y servicios<br>â€¢ OptimizaciÃ³n de rendimiento |
| **Desarrollador 2** | **Backend Developer & Database Engineer** | â€¢ ConfiguraciÃ³n de Supabase<br>â€¢ DiseÃ±o y modelado de base de datos PostgreSQL<br>â€¢ ImplementaciÃ³n de polÃ­ticas RLS (Row Level Security)<br>â€¢ CreaciÃ³n de scripts SQL<br>â€¢ GestiÃ³n de autenticaciÃ³n y seguridad |
| **Desarrollador 3** | **Frontend Developer & UX/UI Designer** | â€¢ DiseÃ±o de interfaz de usuario<br>â€¢ ImplementaciÃ³n de componentes Shadcn/ui<br>â€¢ Desarrollo de dashboards interactivos<br>â€¢ DiseÃ±o responsive y accesibilidad<br>â€¢ Experiencia de usuario (UX) |
| **Desarrollador 4** | **QA Engineer & DevOps** | â€¢ Pruebas de funcionalidad y integraciÃ³n<br>â€¢ ConfiguraciÃ³n de CI/CD<br>â€¢ Deployment en Netlify/Vercel<br>â€¢ Monitoreo de errores<br>â€¢ DocumentaciÃ³n tÃ©cnica |
| **Product Owner** | **LÃ­der de Proyecto & Analista de Negocio** | â€¢ DefiniciÃ³n de requisitos<br>â€¢ PriorizaciÃ³n de features<br>â€¢ ComunicaciÃ³n con stakeholders<br>â€¢ PlanificaciÃ³n de sprints<br>â€¢ Control de calidad |

### Roles por MÃ³dulo del Sistema

**MÃ³dulo de AutenticaciÃ³n:**
- Responsable: Backend Developer
- Soporte: Full Stack Developer

**MÃ³dulo de GestiÃ³n de Citas:**
- Responsable: Full Stack Developer
- Soporte: Frontend Developer

**MÃ³dulo de Historial ClÃ­nico:**
- Responsable: Backend Developer
- Soporte: Full Stack Developer

**MÃ³dulo de Videollamadas:**
- Responsable: Frontend Developer
- Soporte: Full Stack Developer

**MÃ³dulo Administrativo:**
- Responsable: Full Stack Developer
- Soporte: Backend Developer

---

## ğŸ¯ 4. Â¿A QuiÃ©n EstÃ¡ Dirigido?

### Usuarios Finales del Sistema

#### ğŸ‘¤ **Pacientes** (Usuario Principal)
**Perfil:**
- Personas de todas las edades que requieren servicios mÃ©dicos
- Usuarios con acceso a internet y dispositivos mÃ³viles o computadores
- Pacientes en zonas urbanas y rurales
- Personas con movilidad reducida que prefieren consultas virtuales

**Necesidades que satisface:**
- Agendar citas mÃ©dicas sin desplazarse
- Acceder a su historial clÃ­nico completo
- Recibir atenciÃ³n mÃ©dica virtual
- Gestionar sus fÃ³rmulas y tratamientos
- Reducir tiempos de espera

#### ğŸ‘¨â€âš•ï¸ **Personal MÃ©dico** (Profesionales de la Salud)
**Perfil:**
- MÃ©dicos generales y especialistas
- Enfermeros y personal de salud
- Profesionales registrados con tÃ­tulo mÃ©dico

**Necesidades que satisface:**
- Gestionar consultas de manera eficiente
- Acceder al historial completo de pacientes
- Emitir prescripciones digitales
- Realizar telemedicina
- Optimizar su tiempo de atenciÃ³n

#### ğŸ”§ **Administradores** (Personal Administrativo)
**Perfil:**
- Directores de IPS
- Personal administrativo de centros mÃ©dicos
- Gerentes de operaciones de salud

**Necesidades que satisface:**
- Supervisar todas las operaciones
- Gestionar recursos humanos (mÃ©dicos)
- Analizar mÃ©tricas y reportes
- Optimizar procesos administrativos
- Controlar servicios y tarifas

### Alcance GeogrÃ¡fico
- ğŸ‡¨ğŸ‡´ **Primario**: Colombia (IPS y centros mÃ©dicos)
- ğŸŒ **Secundario**: LatinoamÃ©rica (expansiÃ³n futura)

### Segmentos de Mercado
- **IPS Privadas**: ClÃ­nicas y centros mÃ©dicos privados
- **IPS PÃºblicas**: Hospitales y centros de salud estatales
- **Consultorios MÃ©dicos**: PrÃ¡cticas individuales o grupales
- **Telemedicina**: Plataformas de salud digital

---

## ğŸ’» 5. TecnologÃ­as del Software

### ğŸ¨ Frontend (Interfaz de Usuario)

| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| **Next.js** | 15.3.3 | Framework React con SSR, App Router y optimizaciones automÃ¡ticas |
| **React** | 18.3.1 | Biblioteca para construcciÃ³n de interfaces interactivas |
| **TypeScript** | 5.0 | Lenguaje con tipado estÃ¡tico para JavaScript |
| **Tailwind CSS** | 3.4.1 | Framework CSS utility-first para diseÃ±o rÃ¡pido |
| **Shadcn/ui** | Latest | Sistema de componentes UI accesibles y personalizables |
| **Lucide React** | Latest | LibrerÃ­a de iconos SVG optimizados |
| **React Hook Form** | 7.54.2 | GestiÃ³n de formularios con validaciÃ³n |
| **Zod** | 3.24.2 | ValidaciÃ³n de esquemas y tipos |
| **date-fns** | 3.6.0 | ManipulaciÃ³n y formato de fechas |
| **Recharts** | 2.15.1 | GrÃ¡ficos y visualizaciones de datos |
| **jsPDF** | 3.0.3 | GeneraciÃ³n de documentos PDF |

### âš™ï¸ Backend & Base de Datos

| TecnologÃ­a | Tipo | PropÃ³sito |
|------------|------|-----------|
| **Supabase** | BaaS | Backend as a Service completo |
| **PostgreSQL** | Database | Base de datos relacional robusta |
| **Supabase Auth** | Authentication | Sistema de autenticaciÃ³n seguro |
| **Row Level Security (RLS)** | Security | PolÃ­ticas de seguridad a nivel de fila |
| **Supabase Storage** | Storage | Almacenamiento de archivos mÃ©dicos |
| **Supabase Realtime** | Real-time | Notificaciones en tiempo real |

### ğŸ” Seguridad y AutenticaciÃ³n

- **AutenticaciÃ³n**: Email/Password con Supabase Auth
- **AutorizaciÃ³n**: Sistema de roles (ADMIN, PERSONAL, PACIENTE)
- **PolÃ­ticas RLS**: Seguridad a nivel de base de datos
- **EncriptaciÃ³n**: SSL/TLS para comunicaciones
- **ValidaciÃ³n**: Zod para validaciÃ³n de datos en frontend

### ğŸš€ Despliegue y EjecuciÃ³n

#### Entorno de Desarrollo
- **Local**: `npm run dev` (puerto 9002)
- **Hot Reload**: Turbopack para recarga rÃ¡pida
- **Variables de entorno**: `.env.local`

#### Entorno de ProducciÃ³n
- **Hosting**: Netlify / Vercel
- **Base de Datos**: Supabase Cloud
- **CDN**: Next.js optimizations + Netlify CDN
- **SSL**: Certificados automÃ¡ticos

#### Requisitos del Sistema

**Para Desarrollo:**
- Node.js 18+ y npm
- Git para control de versiones
- Editor de cÃ³digo (VS Code recomendado)
- Cuenta de Supabase

**Para ProducciÃ³n:**
- Navegador web moderno (Chrome, Firefox, Safari, Edge)
- ConexiÃ³n a internet estable
- Dispositivo: PC, tablet o smartphone

### ğŸ“¦ GestiÃ³n de Dependencias

```json
{
  "package-manager": "npm",
  "node-version": "18+",
  "total-dependencies": 40+,
  "build-tool": "Next.js Build",
  "test-framework": "En desarrollo"
}
```

### ğŸŒ Tipo de Software

| CaracterÃ­stica | EspecificaciÃ³n |
|----------------|----------------|
| **Tipo** | AplicaciÃ³n Web (SaaS) |
| **Arquitectura** | Cliente-Servidor |
| **Acceso** | Multiplataforma vÃ­a navegador web |
| **Conectividad** | Requiere conexiÃ³n a internet |
| **Deployment** | Cloud (Netlify/Vercel + Supabase) |
| **Escalabilidad** | Horizontal (auto-scaling) |
| **Disponibilidad** | 24/7 con uptime >99.9% |

---

## ğŸ“¦ 6. MÃ³dulos del Sistema

### ğŸ” MÃ³dulo 1: AutenticaciÃ³n y GestiÃ³n de Usuarios

**DescripciÃ³n:**
Sistema completo de registro, inicio de sesiÃ³n y gestiÃ³n de perfiles de usuario con autenticaciÃ³n segura mediante Supabase Auth. Implementa un sistema de roles multinivel (ADMIN, PERSONAL, PACIENTE) con permisos diferenciados.

**Funcionalidades Principales:**
- âœ… Registro de nuevos usuarios con validaciÃ³n de datos
- âœ… Inicio de sesiÃ³n con email y contraseÃ±a
- âœ… RecuperaciÃ³n de contraseÃ±a
- âœ… GestiÃ³n de perfiles (foto, informaciÃ³n personal, especialidad)
- âœ… Cambio de roles (solo para administradores)
- âœ… Cierre de sesiÃ³n seguro
- âœ… ProtecciÃ³n de rutas segÃºn rol

**TecnologÃ­as:**
- Supabase Auth para autenticaciÃ³n
- React Hook Form para formularios
- Zod para validaciÃ³n
- Row Level Security (RLS) en PostgreSQL

**Tablas de Base de Datos:**
- `users`: InformaciÃ³n completa de usuarios
- `auth.users`: Tabla de autenticaciÃ³n de Supabase

---

### ğŸ“… MÃ³dulo 2: GestiÃ³n de Citas MÃ©dicas

**DescripciÃ³n:**
Sistema integral para el agendamiento, seguimiento y gestiÃ³n de citas mÃ©dicas tanto virtuales como presenciales. Permite a pacientes reservar citas, a mÃ©dicos gestionarlas, y a administradores supervisar todo el proceso.

**Funcionalidades Principales:**

**Para Pacientes:**
- âœ… Explorar catÃ¡logo de servicios mÃ©dicos
- âœ… Agendar cita seleccionando fecha, hora y mÃ©dico
- âœ… Ver citas programadas y historial
- âœ… Recibir notificaciones de confirmaciÃ³n
- âœ… Acceder a enlaces de videollamada (citas virtuales)
- âœ… Cancelar o reprogramar citas
- âœ… Ver detalles de consultas completadas

**Para MÃ©dicos:**
- âœ… Dashboard con citas del dÃ­a
- âœ… Lista filtrable de citas (estado, fecha, paciente)
- âœ… EnvÃ­o de enlaces de videollamada
- âœ… ConfirmaciÃ³n de citas
- âœ… Registro de asistencia
- âœ… ReprogramaciÃ³n de citas
- âœ… Ver informaciÃ³n completa del paciente

**Para Administradores:**
- âœ… Vista completa de todas las citas
- âœ… Filtros avanzados (mÃ©dico, servicio, fecha, estado)
- âœ… EstadÃ­sticas de ocupaciÃ³n
- âœ… GestiÃ³n de cancelaciones masivas
- âœ… Reportes de citas por perÃ­odo

**Estados de Citas:**
- `pendiente`: Cita creada, esperando confirmaciÃ³n
- `confirmada`: Cita aceptada por el mÃ©dico
- `en curso`: Consulta en desarrollo
- `completada`: Consulta finalizada con diagnÃ³stico
- `cancelada`: Cita cancelada por paciente o mÃ©dico

**TecnologÃ­as:**
- React Calendar para selecciÃ³n de fechas
- Notificaciones en tiempo real con Supabase Realtime
- ValidaciÃ³n de horarios disponibles

**Tablas de Base de Datos:**
- `appointments`: InformaciÃ³n de citas
- `services`: CatÃ¡logo de servicios mÃ©dicos
- `notifications`: Notificaciones automÃ¡ticas

---

### ğŸ©º MÃ³dulo 3: Historial ClÃ­nico Digital

**DescripciÃ³n:**
Sistema completo para el registro, almacenamiento y consulta del historial mÃ©dico de los pacientes. Centraliza diagnÃ³sticos, tratamientos, notas de evoluciÃ³n y documentos mÃ©dicos en un formato digital seguro y accesible.

**Funcionalidades Principales:**

**Resumen del Paciente:**
- âœ… InformaciÃ³n demogrÃ¡fica (nombre, edad, grupo sanguÃ­neo)
- âœ… Alergias conocidas
- âœ… Antecedentes personales y familiares

**DiagnÃ³sticos y Consultas:**
- âœ… Listado de diagnÃ³sticos con cÃ³digo CIE-10
- âœ… DescripciÃ³n detallada de cada diagnÃ³stico
- âœ… Tratamientos recomendados
- âœ… Fecha y mÃ©dico que realizÃ³ el diagnÃ³stico
- âœ… Consultas anteriores con estado
- âœ… ExportaciÃ³n de diagnÃ³sticos individuales en PDF

**Notas de EvoluciÃ³n MÃ©dica:**
- âœ… Registro cronolÃ³gico de la evoluciÃ³n del paciente
- âœ… Observaciones clÃ­nicas detalladas
- âœ… Respuesta a tratamientos
- âœ… Cambios en el estado de salud
- âœ… MÃ©dico responsable de cada nota

**Documentos y Estudios:**
- âœ… Almacenamiento de exÃ¡menes mÃ©dicos
- âœ… Resultados de laboratorio
- âœ… ImÃ¡genes diagnÃ³sticas
- âœ… Documentos de especialistas
- âœ… Descarga y visualizaciÃ³n de archivos
- âœ… Metadatos (fecha de subida, tipo, responsable)

**ExportaciÃ³n:**
- âœ… PDF del historial completo
- âœ… PDF de diagnÃ³sticos especÃ­ficos
- âœ… Resumen mÃ©dico
- âœ… Formato imprimible

**TecnologÃ­as:**
- jsPDF y jsPDF-AutoTable para generaciÃ³n de PDFs
- Supabase Storage para documentos
- Base64 encoding para archivos

**Tablas de Base de Datos:**
- `evolution_notes`: Notas de evoluciÃ³n mÃ©dica
- `medical_documents`: Documentos adjuntos
- `appointments`: DiagnÃ³sticos asociados a citas

---

### ğŸ’Š MÃ³dulo 4: GestiÃ³n de FÃ³rmulas MÃ©dicas

**DescripciÃ³n:**
Sistema para la emisiÃ³n, gestiÃ³n y seguimiento de prescripciones mÃ©dicas digitales. Permite a los mÃ©dicos emitir fÃ³rmulas electrÃ³nicas y a los pacientes acceder a sus medicamentos recetados con alertas de vencimiento.

**Funcionalidades Principales:**

**Para MÃ©dicos:**
- âœ… EmisiÃ³n de fÃ³rmulas durante la consulta
- âœ… Agregar mÃºltiples medicamentos con dosificaciÃ³n
- âœ… Establecer fecha de vencimiento
- âœ… Observaciones y recomendaciones
- âœ… GeneraciÃ³n automÃ¡tica de PDF profesional
- âœ… GestiÃ³n de renovaciones
- âœ… Historial de fÃ³rmulas emitidas

**Para Pacientes:**
- âœ… VisualizaciÃ³n de fÃ³rmulas activas
- âœ… Historial completo de prescripciones
- âœ… Alertas de vencimiento prÃ³ximo
- âœ… Descarga de fÃ³rmulas en PDF
- âœ… InformaciÃ³n detallada de cada medicamento
- âœ… Notificaciones de nuevas fÃ³rmulas

**Para Administradores:**
- âœ… SupervisiÃ³n de prescripciones emitidas
- âœ… EstadÃ­sticas de medicamentos
- âœ… Control de renovaciones
- âœ… Reportes por mÃ©dico y perÃ­odo

**Estructura de la FÃ³rmula:**
- Datos del paciente (nombre, documento, edad)
- Datos del mÃ©dico (nombre, registro mÃ©dico)
- Lista de medicamentos (nombre, dosis, frecuencia, duraciÃ³n)
- Fecha de emisiÃ³n y vencimiento
- Observaciones generales
- CÃ³digo QR para validaciÃ³n (futuro)

**TecnologÃ­as:**
- jsPDF para generaciÃ³n de fÃ³rmulas
- Sistema de plantillas PDF
- CÃ¡lculo automÃ¡tico de fechas de vencimiento

**Tablas de Base de Datos:**
- `formulas`: InformaciÃ³n de prescripciones
- `medications`: (JSON) Lista de medicamentos por fÃ³rmula

---

### ğŸ”” MÃ³dulo 5: Sistema de Notificaciones

**DescripciÃ³n:**
Sistema centralizado de notificaciones en tiempo real que mantiene informados a todos los usuarios sobre eventos importantes del sistema. Gestiona diferentes tipos de notificaciones segÃºn el rol del usuario.

**Funcionalidades Principales:**

**Tipos de Notificaciones:**

**Para Pacientes:**
- âœ… `appointment_reminder`: Recordatorio de cita prÃ³xima (24h antes)
- âœ… `appointment_confirmed`: ConfirmaciÃ³n de cita por el mÃ©dico
- âœ… `appointment_cancelled`: CancelaciÃ³n de cita
- âœ… `diagnosis_ready`: DiagnÃ³stico completado y disponible
- âœ… `video_call_ready`: Enlace de videollamada disponible
- âœ… `formula_ready`: Nueva fÃ³rmula mÃ©dica emitida
- âœ… `formula_expiring`: FÃ³rmula prÃ³xima a vencer (7 dÃ­as antes)

**Para MÃ©dicos:**
- âœ… `new_appointment`: Nueva cita agendada
- âœ… `appointment_cancelled`: Paciente cancelÃ³ cita
- âœ… `appointment_today`: Recordatorio de citas del dÃ­a

**Para Administradores:**
- âœ… `system_alert`: Alertas del sistema
- âœ… `new_user`: Nuevo usuario registrado
- âœ… `report_ready`: Reporte generado

**CaracterÃ­sticas:**
- âœ… Centro de notificaciones con contador
- âœ… Notificaciones no leÃ­das destacadas
- âœ… Marcado de leÃ­do/no leÃ­do
- âœ… EliminaciÃ³n de notificaciones
- âœ… Filtrado por tipo
- âœ… Acceso directo a la secciÃ³n relacionada
- âœ… Persistencia en base de datos

**TecnologÃ­as:**
- Supabase Realtime para notificaciones en tiempo real
- React Context para estado global
- Badge indicators para contador

**Tablas de Base de Datos:**
- `notifications`: Almacenamiento de notificaciones
  * `user_id`: Usuario destinatario
  * `type`: Tipo de notificaciÃ³n
  * `title`: TÃ­tulo
  * `message`: Mensaje descriptivo
  * `read`: Estado de lectura
  * `related_id`: ID del recurso relacionado
  * `created_at`: Fecha de creaciÃ³n

---

### ğŸ¥ MÃ³dulo 6: Telemedicina y Videollamadas

**DescripciÃ³n:**
Sistema que facilita las consultas mÃ©dicas virtuales mediante el envÃ­o y gestiÃ³n de enlaces de videollamada. Permite a los mÃ©dicos iniciar consultas virtuales y a los pacientes acceder fÃ¡cilmente a la videollamada.

**Funcionalidades Principales:**

**Para MÃ©dicos:**
- âœ… EnvÃ­o de enlaces de videollamada
- âœ… Compatibilidad con mÃºltiples plataformas:
  * Google Meet
  * Zoom
  * Microsoft Teams
  * Cualquier URL de videollamada
- âœ… ValidaciÃ³n de URLs
- âœ… EdiciÃ³n de enlaces enviados
- âœ… NotificaciÃ³n automÃ¡tica al paciente
- âœ… Registro de fecha/hora de envÃ­o

**Para Pacientes:**
- âœ… RecepciÃ³n de notificaciÃ³n con enlace
- âœ… BotÃ³n directo "Unirse a Videollamada"
- âœ… Recordatorio para ingresar 5 minutos antes
- âœ… Apertura automÃ¡tica en nueva pestaÃ±a
- âœ… Indicador visual de enlace disponible

**Flujo de Videollamada:**
1. MÃ©dico crea enlace de videollamada en la plataforma elegida
2. MÃ©dico ingresa enlace en el sistema
3. Sistema valida el formato de URL
4. Se envÃ­a notificaciÃ³n al paciente
5. Paciente recibe alerta con recordatorio
6. Paciente hace clic en "Unirse a Videollamada"
7. Se abre la plataforma de videollamada
8. Consulta virtual se realiza
9. MÃ©dico registra diagnÃ³stico despuÃ©s

**Validaciones:**
- âœ… URL vÃ¡lida (protocolo https://)
- âœ… Formato correcto de enlace
- âœ… Solo disponible para citas confirmadas
- âœ… No disponible para citas completadas/canceladas

**TecnologÃ­as:**
- ValidaciÃ³n de URLs con JavaScript
- IntegraciÃ³n con servicios externos de videollamada
- Almacenamiento seguro de enlaces

**Tablas de Base de Datos:**
- `appointments`: 
  * `video_call_link`: URL de la videollamada
  * `video_call_link_sent_at`: Timestamp de envÃ­o

---

### ğŸ‘¨â€ğŸ’¼ MÃ³dulo 7: Panel Administrativo

**DescripciÃ³n:**
Sistema completo de administraciÃ³n que permite a los administradores supervisar, gestionar y analizar todas las operaciones de la IPS. Incluye gestiÃ³n de personal, servicios, turnos y reportes estadÃ­sticos.

**Funcionalidades Principales:**

**GestiÃ³n de Personal MÃ©dico:**
- âœ… Registro de mÃ©dicos y personal
- âœ… Cambio de roles (PACIENTE â†” PERSONAL)
- âœ… AsignaciÃ³n de especialidades:
  * MÃ©dico general
  * Pediatra
  * PsicÃ³logo
  * Certificador mÃ©dico
- âœ… Lista de personal activo
- âœ… GestiÃ³n de usuarios registrados como pacientes
- âœ… PromociÃ³n de pacientes a personal mÃ©dico

**GestiÃ³n de Turnos:**
- âœ… AsignaciÃ³n de turnos mÃ©dicos
- âœ… Tipos de turnos:
  * Diurno (6:00 AM - 2:00 PM)
  * Vespertino (2:00 PM - 10:00 PM)
  * Nocturno (10:00 PM - 6:00 AM)
  * 12h dÃ­a (6:00 AM - 6:00 PM)
  * 12h noche (6:00 PM - 6:00 AM)
  * 24h (turno completo)
- âœ… Calendario visual de turnos
- âœ… CÃ¡lculo automÃ¡tico de recargos nocturnos
- âœ… FinalizaciÃ³n de turnos
- âœ… Historial de turnos por mÃ©dico

**GestiÃ³n de Servicios:**
- âœ… CreaciÃ³n de servicios mÃ©dicos
- âœ… ConfiguraciÃ³n de:
  * Nombre y descripciÃ³n
  * Precio
  * DuraciÃ³n estimada
  * Tipo (virtual/presencial)
- âœ… ActivaciÃ³n/desactivaciÃ³n de servicios
- âœ… EdiciÃ³n de servicios existentes
- âœ… CatÃ¡logo completo

**GestiÃ³n de Citas:**
- âœ… Vista completa de todas las citas
- âœ… Filtros avanzados:
  * Por mÃ©dico
  * Por servicio
  * Por fecha
  * Por estado
  * Por paciente
- âœ… ConfirmaciÃ³n masiva
- âœ… CancelaciÃ³n con razones
- âœ… EstadÃ­sticas de ocupaciÃ³n
- âœ… ExportaciÃ³n de reportes

**Reportes y EstadÃ­sticas:**
- âœ… Dashboard con mÃ©tricas clave:
  * Total de citas por estado
  * Servicios mÃ¡s solicitados
  * OcupaciÃ³n por mÃ©dico
  * Ingresos proyectados
  * Tiempos de atenciÃ³n promedio
- âœ… GrÃ¡ficos interactivos (Recharts)
- âœ… Filtros por perÃ­odo
- âœ… ExportaciÃ³n de reportes

**TecnologÃ­as:**
- Recharts para visualizaciones
- Filtros dinÃ¡micos con React
- CÃ¡lculos de mÃ©tricas en tiempo real
- ExportaciÃ³n de datos

**Tablas de Base de Datos:**
- `users`: GestiÃ³n de roles y personal
- `shifts`: Turnos mÃ©dicos
- `services`: CatÃ¡logo de servicios
- `appointments`: Todas las citas del sistema

---

### ğŸ”„ MÃ³dulo 8: GestiÃ³n de Roles y Permisos

**DescripciÃ³n:**
Sistema de control de acceso basado en roles (RBAC) que define quÃ© puede ver y hacer cada tipo de usuario en la plataforma. Implementa seguridad a nivel de aplicaciÃ³n y base de datos.

**Roles del Sistema:**

**PACIENTE:**
- âœ… Acceso a dashboard personal
- âœ… Agendar y gestionar citas propias
- âœ… Ver historial clÃ­nico personal
- âœ… Acceder a fÃ³rmulas mÃ©dicas
- âœ… Actualizar perfil
- âœ… Recibir notificaciones
- âŒ No acceso a datos de otros pacientes
- âŒ No acceso a funciones administrativas

**PERSONAL (MÃ©dico):**
- âœ… Dashboard de consultas
- âœ… Gestionar citas asignadas
- âœ… Registrar diagnÃ³sticos
- âœ… Emitir fÃ³rmulas mÃ©dicas
- âœ… Ver historial de sus pacientes
- âœ… Gestionar turnos propios
- âœ… Enviar enlaces de videollamada
- âŒ No puede gestionar otros mÃ©dicos
- âŒ No acceso a reportes globales

**ADMIN:**
- âœ… Acceso completo al sistema
- âœ… Gestionar todo el personal
- âœ… Asignar roles y especialidades
- âœ… Ver todas las citas
- âœ… Gestionar servicios
- âœ… Acceder a reportes y estadÃ­sticas
- âœ… Configurar el sistema
- âœ… Control total de usuarios

**ImplementaciÃ³n de Seguridad:**

**Frontend:**
```typescript
// Rutas protegidas segÃºn rol
if (user.role !== 'ADMIN') {
  redirect('/dashboard');
}
```

**Backend (RLS Policies):**
```sql
-- Pacientes solo ven sus datos
CREATE POLICY "Users can view own data" ON appointments
  FOR SELECT USING (patient_id = auth.uid());

-- MÃ©dicos ven sus citas
CREATE POLICY "Doctors can view assigned appointments" ON appointments
  FOR SELECT USING (doctor_id = auth.uid());

-- Admins ven todo
CREATE POLICY "Admins can view all" ON appointments
  FOR SELECT USING (
    EXISTS (SELECT 1 FROM users WHERE id = auth.uid() AND role = 'ADMIN')
  );
```

**TecnologÃ­as:**
- Supabase RLS para seguridad de base de datos
- Middleware de Next.js para rutas protegidas
- React Context para estado de autenticaciÃ³n

**Tablas de Base de Datos:**
- `users.role`: Enum ('ADMIN', 'PERSONAL', 'PACIENTE')
- PolÃ­ticas RLS en todas las tablas sensibles

---

## ğŸ“Š Resumen TÃ©cnico

### Arquitectura General
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FRONTEND (Next.js + React)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Patient â”‚  â”‚ Doctor  â”‚  â”‚  Admin  â”‚    â”‚
â”‚  â”‚  Panel  â”‚  â”‚  Panel  â”‚  â”‚  Panel  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   Supabase API     â”‚
          â”‚  (PostgreSQL +     â”‚
          â”‚   Auth + Storage)  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flujo de Datos
1. Usuario interactÃºa con interfaz (React)
2. Componentes envÃ­an peticiones a Supabase
3. Supabase valida autenticaciÃ³n y permisos (RLS)
4. PostgreSQL ejecuta consultas
5. Datos retornan al frontend
6. React actualiza interfaz

### MÃ©tricas del Proyecto
- **LÃ­neas de cÃ³digo**: ~15,000+
- **Componentes React**: 50+
- **PÃ¡ginas**: 25+
- **Tablas de BD**: 10+
- **Scripts SQL**: 15+
- **MÃ³dulos principales**: 8
- **Tiempo de desarrollo**: 6 meses
- **Frameworks/LibrerÃ­as**: 40+

---

<div align="center">

**ğŸ“… Fecha de elaboraciÃ³n**: Noviembre 2025

**ğŸ¥ IPS Virtual - Transformando la atenciÃ³n mÃ©dica digital**

---

*Este documento describe la arquitectura tÃ©cnica y funcional del Sistema IPS Virtual desarrollado para la gestiÃ³n integral de servicios mÃ©dicos virtuales y presenciales.*

</div>
